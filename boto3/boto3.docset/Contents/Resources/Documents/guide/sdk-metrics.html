
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <!-- Licensed under the Apache 2.0 License -->
  <link rel="stylesheet" type="text/css" href="../_static/fonts/open-sans/stylesheet.css" />
  <!-- Licensed under the SIL Open Font License -->
  <link rel="stylesheet" type="text/css" href="../_static/fonts/source-serif-pro/source-serif-pro.css" />
  <link rel="stylesheet" type="text/css" href="../_static/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="../_static/css/bootstrap-theme.min.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <title>SDK metrics &#8212; Boto3 Docs 1.17.70 documentation</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/guzzle.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="What’s new" href="new.html" />
    <link rel="prev" title="Cloud9" href="cloud9.html" />
  
   

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="new.html" title="What’s new"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="cloud9.html" title="Cloud9"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Boto3 Docs 1.17.70 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Developer guide</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">SDK metrics</a></li> 
      </ul>
    </div>
    <div class="container-wrapper">

      <div id="mobile-toggle">
        <a href="#"><span class="glyphicon glyphicon-align-justify" aria-hidden="true"></span></a>
      </div>
  <div id="left-column">
    <div class="sphinxsidebar"><a href="
    ../index.html" class="text-logo">Boto3 Docs 1.17.70 documentation</a><div class="sidebar-block">
  <div class="sidebar-wrapper">
    <h2>Table Of Contents</h2>
  </div>
  <div class="sidebar-toc">
    
    
      <ul>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="sqs.html">A sample tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Code examples</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developer guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#sdk-features">SDK features</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#tools">Tools</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="cloud9.html">Cloud9</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">SDK metrics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#migrations">Migrations</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="security.html">Security</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/services/index.html">Available services</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/core/index.html">Core references</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/customizations/index.html">Customization references</a></li>
</ul>

    
  </div>
</div>
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <div id="main-search">
      <form class="form-inline" action="../search.html" method="GET" role="form">
        <div class="input-group">
          <input name="q" type="text" class="form-control" placeholder="Search...">
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div>
      
    </div>
  </div>
        <div id="right-column">
          

          <div role="navigation" aria-label="breadcrumbs navigation">
            <ol class="breadcrumb">
              <li><a href="../index.html">Docs</a></li>
              
                <li><a href="index.html">Developer guide</a></li>
              
              <li>SDK metrics</li>
            </ol>
          </div>
          
<!--REGION_DISCLAIMER_DO_NOT_REMOVE-->
          <div class="document clearer body">
            
  <div class="section" id="sdk-metrics">
<span id="guide-sdk-metrics"></span><h1>SDK metrics<a class="headerlink" href="#sdk-metrics" title="Permalink to this headline">¶</a></h1>
<p>AWS SDK Metrics for Enterprise Support (SDK Metrics) enables Enterprise customers to collect metrics from AWS SDKs on their hosts and clients shared with
AWS Enterprise Support. SDK Metrics provides information that helps speed up detection and diagnosis of issues occurring in connections
to AWS services for AWS Enterprise Support customers.</p>
<p>As telemetry is collected on each host, it is relayed via UDP to 127.0.0.1 (aka localhost), where the CloudWatch agent aggregates the data and sends it
to the SDK Metrics service. Therefore, to receive metrics, you must add the CloudWatch agent to your instance.</p>
<p>The following steps to set up SDK Metrics pertain to an Amazon EC2 instance running Amazon Linux for a client application that is using the AWS SDK for Python.
SDK Metrics is also available for your production environments if you enable it while configuring the AWS SDK for Python.</p>
<p>To utilize SDK Metrics, run the latest version of the CloudWatch agent. Learn how to
<a class="reference external" href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/CloudWatch-Agent-SDK-Metrics.html">Configure the CloudWatch Agent for SDK Metrics</a> in the Amazon CloudWatch User Guide.</p>
<p>To set up SDK Metrics with the AWS SDK for Python, follow these instructions:</p>
<ol class="arabic simple">
<li><p>Create an application with an AWS SDK for Python client to use an AWS service.</p></li>
<li><p>Host your project on an Amazon EC2 instance or in your local environment.</p></li>
<li><p>Install and use the latest version of Boto3 (AWS SDK for Python).</p></li>
<li><p>Install and configure a CloudWatch agent on an EC2 instance or in your local environment as described in the <a class="reference external" href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/CloudWatch-Agent-SDK-Metrics.html">Amazon CloudWatch User Guide</a> .</p></li>
<li><p>Authorize SDK Metrics to collect and send metrics as described in the <a class="reference external" href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/CloudWatch-Agent-SDK-Metrics.html">Amazon CloudWatch User Guide</a> ..</p></li>
<li><p><a class="reference internal" href="#csm-enable-agent"><span class="std std-ref">Enable SDK metrics</span></a>.</p></li>
</ol>
<p>For more information, see the following:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#csm-update-agent"><span class="std std-ref">Update a CloudWatch agent</span></a></p></li>
<li><p><a class="reference internal" href="#csm-disable-agent"><span class="std std-ref">Disable SDK metrics</span></a></p></li>
</ul>
<div class="section" id="enable-sdk-metrics">
<span id="csm-enable-agent"></span><h2>Enable SDK metrics<a class="headerlink" href="#enable-sdk-metrics" title="Permalink to this headline">¶</a></h2>
<p>By default, SDK Metrics is turned off, and the port is set to 31000. The following are the default parameters.</p>
<p>Enabling SDK Metrics is independent of configuring your credentials to use an AWS service.</p>
<p>You can enable SDK Metrics by setting environment variables or by using the AWS Shared config file.</p>
<div class="section" id="option-1-set-environment-variables">
<h3>Option 1: Set environment variables<a class="headerlink" href="#option-1-set-environment-variables" title="Permalink to this headline">¶</a></h3>
<p>If <code class="code docutils literal notranslate"><span class="pre">AWS_CSM_ENABLED</span></code> is not set, the SDK checks the <code class="code docutils literal notranslate"><span class="pre">AWS_DEFAULT_PROFILE</span></code> profile to determine if SDK Metrics is enabled. By default this is set to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
<p>To turn on SDK Metrics, add the following to your environmental variables.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">AWS_CSM_ENABLED</span><span class="o">=</span><span class="nb">true</span>
</pre></div>
</div>
<p><a class="reference internal" href="#csm-update-agent"><span class="std std-ref">Other configuration settings</span></a> are available.</p>
<p>Note: Enabling SDK Metrics does not configure your credentials to use an AWS service.</p>
</div>
<div class="section" id="option-2-aws-shared-config-file">
<h3>Option 2: AWS shared config file<a class="headerlink" href="#option-2-aws-shared-config-file" title="Permalink to this headline">¶</a></h3>
<p>If no CSM configuration is found in the environment variables, the SDK looks for your default AWS profile field. If <code class="code docutils literal notranslate"><span class="pre">AWS_DEFAULT_PROFILE</span></code> is set to something other than default, update that profile. To enable SDK Metrics, add <code class="code docutils literal notranslate"><span class="pre">csm_enabled</span></code> to the shared config file located at <code class="file docutils literal notranslate"><span class="pre">~/.aws/config</span></code>.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[default]</span>
<span class="na">csm_enabled</span> <span class="o">=</span> <span class="s">true</span>

<span class="k">[profile aws_csm]</span>
<span class="na">csm_enabled</span> <span class="o">=</span> <span class="s">true</span>
</pre></div>
</div>
<p><a class="reference internal" href="#csm-update-agent"><span class="std std-ref">Other configuration settings</span></a> are available.</p>
<p>Note: Enabling SDK Metrics is independent from configuring your credentials to use an AWS service. You can use a different profile to authenticate.</p>
</div>
</div>
<div class="section" id="update-a-cloudwatch-agent">
<span id="csm-update-agent"></span><h2>Update a CloudWatch agent<a class="headerlink" href="#update-a-cloudwatch-agent" title="Permalink to this headline">¶</a></h2>
<p>To make changes to the port, you need to set the values and then restart any AWS jobs that are currently active.</p>
<div class="section" id="id1">
<h3>Option 1: Set environment variables<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>Most services use the default port. But if your service requires a unique port ID, add <code class="docutils literal notranslate"><span class="pre">AWS_CSM_PORT=[port_number]</span></code>, to the host’s environment variables.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">AWS_CSM_ENABLED</span><span class="o">=</span><span class="nb">true</span>
<span class="nb">export</span> <span class="nv">AWS_CSM_PORT</span><span class="o">=</span><span class="m">1234</span>
</pre></div>
</div>
</div>
<div class="section" id="id2">
<h3>Option 2: AWS shared config file<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>Most services use the default port. But if your service requires a
unique port ID, add <code class="docutils literal notranslate"><span class="pre">csm_port</span> <span class="pre">=</span> <span class="pre">[port_number]</span></code> to <code class="docutils literal notranslate"><span class="pre">~/.aws/config</span></code>.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[default]</span>
<span class="na">csm_enabled</span> <span class="o">=</span> <span class="s">false</span>
<span class="na">csm_port</span> <span class="o">=</span> <span class="s">1234</span>

<span class="k">[profile aws_csm]</span>
<span class="na">csm_enabled</span> <span class="o">=</span> <span class="s">false</span>
<span class="na">csm_port</span> <span class="o">=</span> <span class="s">1234</span>
</pre></div>
</div>
</div>
<div class="section" id="restart-sdk-metrics">
<h3>Restart SDK metrics<a class="headerlink" href="#restart-sdk-metrics" title="Permalink to this headline">¶</a></h3>
<p>To restart a job, run the following commands.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>amazon-cloudwatch-agent-ctl –a stop<span class="p">;</span>
amazon-cloudwatch-agent-ctl –a start<span class="p">;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="disable-sdk-metrics">
<span id="csm-disable-agent"></span><h2>Disable SDK metrics<a class="headerlink" href="#disable-sdk-metrics" title="Permalink to this headline">¶</a></h2>
<p>To turn off SDK Metrics, remove <code class="docutils literal notranslate"><span class="pre">csm_enabled</span></code> from your environment variables, or in your AWS Shared config file located at <code class="file docutils literal notranslate"><span class="pre">~/.aws/config</span></code>.
Then restart your CloudWatch agent so that the changes can take effect.</p>
<p><strong>Environment Variables</strong></p>
<p>Remove <code class="docutils literal notranslate"><span class="pre">AWS_CSM_ENABLED</span></code> from your environment variables or set it to false.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">unset</span> AWS_CSM_ENABLED
</pre></div>
</div>
<p><strong>AWS Shared Config File</strong></p>
<p>Remove <code class="docutils literal notranslate"><span class="pre">csm_enabled</span></code> from the profiles in your AWS Shared config file located at <code class="file docutils literal notranslate"><span class="pre">~/.aws/config</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Environment variables override the AWS Shared config file. If SDK Metrics is enabled in the environment variables, the SDK Metrics remain enabled.</p>
</div>
<p>To explicitly opt-out of SDK Metrics set <code class="docutils literal notranslate"><span class="pre">csm_enabled</span></code> to false.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[default]</span>
<span class="na">csm_enabled</span> <span class="o">=</span> <span class="s">false</span>

<span class="k">[profile aws_csm]</span>
<span class="na">csm_enabled</span> <span class="o">=</span> <span class="s">false</span>
</pre></div>
</div>
<p>To disable SDK Metrics, use the following command to stop CloudWatch agent.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>sudo amazon-cloudwatch-agent-ctl -a stop <span class="o">&amp;&amp;</span>
<span class="nb">echo</span> <span class="s2">&quot;Done&quot;</span>
</pre></div>
</div>
<p>If you are using other CloudWatch features, restart CloudWatch Agent with the following command.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>amazon-cloudwatch-agent-ctl –a start<span class="p">;</span>
</pre></div>
</div>
<div class="section" id="id3">
<h3>Restart SDK metrics<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>To restart a SDK Metrics job, run the following commands.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>amazon-cloudwatch-agent-ctl –a stop<span class="p">;</span>
amazon-cloudwatch-agent-ctl –a start<span class="p">;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="definitions-for-sdk-metrics">
<h2>Definitions for SDK metrics<a class="headerlink" href="#definitions-for-sdk-metrics" title="Permalink to this headline">¶</a></h2>
<p>You can use the following descriptions of SDK Metrics to interpret your results. In general, these metrics are available for review
with your Technical Account Manager during regular business reviews. AWS Support resources and your Technical Account Manager
should have access to SDK Metrics data to help you resolve cases, but if you discover data that is confusing or unexpected, but
doesn’t seem to be negatively impacting your applications’ performance, it is best to review that data during scheduled
business reviews.</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Metric:</p></th>
<th class="head"><p>CallCount</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Definition</p></td>
<td><p>Total number of successful or failed API calls from your code to AWS services</p></td>
</tr>
<tr class="row-odd"><td><p>How to use it</p></td>
<td><p>Use it as a baseline to correlate with other metrics like errors or throttling.</p></td>
</tr>
</tbody>
</table>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Metric:</p></th>
<th class="head"><p>ClientErrorCount</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Definition</p></td>
<td><p>Number of API calls that fail with client errors (4xx HTTP response codes). <em>Examples: Throttling, Access denied, S3 bucket does not exist, and Invalid parameter value.</em></p></td>
</tr>
<tr class="row-odd"><td><p>How to use it</p></td>
<td><p>Except in certain cases related to throttling (ex. when throttling occurs due to a limit that needs to be increased) this metric can indicate something in your application that needs to be fixed.</p></td>
</tr>
</tbody>
</table>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Metric:</p></th>
<th class="head"><p>ConnectionErrorCount</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Definition</p></td>
<td><p>Number of API calls that fail because of errors connecting to the service. These can be caused by network issues between the customer application and AWS services including load balancers, DNS failures, transit providers. In some cases, AWS issues may result in this error.</p></td>
</tr>
<tr class="row-odd"><td><p>How to use it</p></td>
<td><p>Use this metric to determine whether issues are specific to your application or are caused by your infrastructure and/or network. High ConnectionErrorCount could also indicate short timeout values for API calls.</p></td>
</tr>
</tbody>
</table>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Metric:</p></th>
<th class="head"><p>ThrottleCount</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Definition</p></td>
<td><p>Number of API calls that fail due to throttling by AWS services.</p></td>
</tr>
<tr class="row-odd"><td><p>How to use it</p></td>
<td><p>Use this metric to assess if your application has reached throttle limits, as well as to determine the cause of retries and application latency. Consider distributing calls over a window instead of batching your calls.</p></td>
</tr>
</tbody>
</table>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Metric:</p></th>
<th class="head"><p>ServerErrorCount</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Definition</p></td>
<td><p>Number of API calls that fail due to server errors (5xx HTTP response codes) from AWS Services. These are typically caused by AWS services.</p></td>
</tr>
<tr class="row-odd"><td><p>How to use it</p></td>
<td><p>Determine cause of SDK retries or latency. This metric will not always indicate that AWS services are at fault, as some AWS teams classify latency as an HTTP 503 response.</p></td>
</tr>
</tbody>
</table>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Metric:</p></th>
<th class="head"><p>EndToEndLatency</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Definition</p></td>
<td><p>Total time for your application to make a call using the AWS SDK, inclusive of retries. In other words, regardless of whether it is successful after several attempts, or as soon as a call fails due to an unretriable error.</p></td>
</tr>
<tr class="row-odd"><td><p>How to use it</p></td>
<td><p>Determine how AWS API calls contribute to your application’s overall latency. Higher than expected latency may be caused by issues with network, firewall, or other configuration settings, or by latency that occurs as a result of SDK retries.</p></td>
</tr>
</tbody>
</table>
</div>
</div>


          </div>
            
  <div class="footer-relations">
    
      <div class="pull-left">
        <a class="btn btn-default" href="cloud9.html" title="previous chapter (use the left arrow)">Cloud9</a>
      </div>
    
      <div class="pull-right">
        <a class="btn btn-default" href="new.html" title="next chapter (use the right arrow)">What’s new</a>
      </div>
    </div>
    <div class="clearer"></div>
  
        </div>
        <div class="clearfix"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="new.html" title="What’s new"
             >next</a> |</li>
        <li class="right" >
          <a href="cloud9.html" title="Cloud9"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Boto3 Docs 1.17.70 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Developer guide</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">SDK metrics</a></li> 
      </ul>
    </div>
<div class="footer">
    <script type="text/javascript" src="../_static/shortbreadv1.js"></script>
    <script type="text/javascript">
            const shortbread = AWSCShortbread({
                domain: ".amazonaws.com",
});
            shortbread.checkForCookieConsent();
    </script>
    <a href="http://aws.amazon.com/privacy">Privacy</a> | <a href="http://aws.amazon.com/terms">Site Terms</a> | <a
        href="#" onclick="shortbread.customizeCookies();">Cookie preferences</a> |
    &copy; Copyright 2021, Amazon Web Services, Inc. Created using <a href="https://www.sphinx-doc.org/">Sphinx</a>.
</div>
  </body>
</html>